<!doctype linuxdoc system>
<article>
<title>Squid 3.1.0.1 release notes</title>
<author>Squid Developers</author>

<abstract>
This document contains the release notes for version 3.1 of Squid.
Squid is a WWW Cache application developed by the National Laboratory
for Applied Network Research and members of the Web Caching community.
</abstract>

<toc>

<sect>Notice
<p>
The Squid Team are pleased to announce the release of Squid-3.1.0.1 for testing.

This new release is available for download from <url url="http://www.squid-cache.org/Versions/v3/3.1/"> or the <url url="http://www.squid-cache.org/Mirrors/http-mirrors.html" name="mirrors">.

A large number of the show-stopper bugs have been fixed along with general improvements to the ICAP support.
While this release is not deemed ready for production use, we believe it is ready for wider testing by the community.

We welcome feedback and bug reports. If you find a bug, please see <url url="http://wiki.squid-cache.org/SquidFaq/TroubleShooting#head-7067fc0034ce967e67911becaabb8c95a34d576d"> for how to submit a report with a stack trace.

<sect1>Known issues
<p>
Although this release is deemed good enough for use in many setups, please note the existence of <url url="http://www.squid-cache.org/bugs/buglist.cgi?query_format=advanced&amp;short_desc_type=allwordssubstr&amp;short_desc=&amp;target_milestone=3.1&amp;long_desc_type=allwordssubstr&amp;long_desc=&amp;bug_file_loc_type=allwordssubstr&amp;bug_file_loc=&amp;status_whiteboard_type=allwordssubstr&amp;status_whiteboard=&amp;bug_status=NEW&amp;bug_status=ASSIGNED&amp;bug_status=REOPENED&amp;emailtype1=substring&amp;email1=&amp;emailtype2=substring&amp;email2=&amp;bugidtype=include&amp;bug_id=&amp;votes=&amp;chfieldfrom=&amp;chfieldto=Now&amp;chfieldvalue=&amp;cmdtype=doit&amp;order=bugs.bug_severity&amp;field0-0-0=noop&amp;type0-0-0=noop&amp;value0-0-0=" name="open bugs against Squid-3.1">.

<sect1>Changes since earlier releases of Squid-3.1
<p>
The 3.1 change history can be <url url="http://www.squid-cache.org/Versions/v3/3.1/changesets/" name="viewed here">.

<sect>Major new features since Squid-3.0
<p>
Squid 3.1 represents a new feature release above 3.0.

The most important of these new features are:

<itemize>
	<item>New Version Numbering System
	<item>Minimal squid.conf improvements
	<item>Native IPv6 Support
	<item>Error Page Localization
	<item>Connection Pinning (for NTLM Auth Passthrough)
	<item>Quality of Service (QoS) Flow support
	<item>SSL Bump (for HTTPS Filtering and Adaptation)
	<item>eCAP Adaptation Module support
</itemize>

Most user-facing changes are reflected in squid.conf (see below).

<sect1>New Version Numbering System

<p>Begining with 3.1 the Squid Developers are trialling a new release numbering system.

<p>We have decided, based on input from interested users to drop the Squid-2 terminology of
   (DEVEL, PRE, RC, and STABLE) from the release package names.
These are replaced with a simpler 3-tier system based around the natural code development cycle.

<p>Daily generated snapshots of all current versions are provided as testing (old DEVEL) and bug-fix releases.
These are numbered from their last release with a date appended.
Snapshots generated from 3.HEAD continue to be highly volatile.

<p>Regular feature releases from Squid-3 will be branched out as sub-versions. Such as this Squid-3.1.

<p>All this is previous policy you should be accustomed to. Now we get to the new numbering change.

<p>Initial branch packages will be generated with a 3.X.0.Z version as testing packages.
Packages and Snapshots generated with these 3-dot numbers are expected to be relatively stable regarding feature behaviors.
Suitable for testing, but without any guarantees under production loads. This replaces both the old PRE and RC packages.

<p>If a large number of bugs are found several *.0.Z packages may be attempted before any is considered production-ready.

<p>When one of these Squid-3.X.0.Z packages passes our bug-free standards a 3.X.Y numbered release will be made.

<p>We can only hope enough testing has been done to consider these ready for production use.
As always we are fully dependent on people testing the previous packages and reporting all bugs.

<p>In support of all this are several squid-dev process changes which have been worked out over the last year.

<itemize>
<item>We no longer accept new features into branches.
     Those are reserved for the next feature release.
     The cycle for major releases is hoped to be fast enough to suit some peoples needs for new features
     and others need for stability in the branched releases.

<item>We now audit and vote on all feature and major code additions.
     Requiring at least two sets of developer eyes on any new features before they are committed to 3.HEAD.
     Vastly reducing the number of bugs in all code.

<item>We have implemented and continue to add more testing infrastructure.
</itemize>


<sect1>Minimal squid.conf improvements

<p>squid.conf has undergone a facelift.

<p>Don't worry, few operational changes have been made.
Older configs from are still expected to run in 3.1 with only the usual minor
changes seen between major release. Details on those are listed below.

<p>New users will be relieved to see a short 32-line or less squid.conf on clean installs.
Many of the options have reasonable defaults but had previously needed them explicitly configured!
These are now proper built-in defaults and no longer need to be in squid.conf unless changed.

<p>All of the option documentation has been offloaded to another file <em>squid.conf.documented</em> which
contains a fully documented set of options previously cluttering up squid.conf itself.

<p>Package maintainers are provided with a second file squid.conf.default which as always contains the default
config options provided on a clean install.


<sect1>Internet Protocol version 6 (IPv6)

<p>Squid 3.1 supports IPv6.
   Details in <url url="http://wiki.squid-cache.org/Features/IPv6" name="The Squid wiki">

<sect2>New Features for IPv6

<p>Squid handles localhost values seperately. For the purpose of ACLs and also external
 connections ::1 is considered a seperate IP from 127.0.0.1. This means all ACL which
 define behaviour for localhost may need ::1/128 included.

<p>Pinger has been upgraded to perform both ICMP and ICMPv6 as required.
 As a result of this and due to a change in the binary protocol format between them,
 new builds of squid are no longer backwards-compatible with old pinger binaries.
 You will need to perform "make install-pinger" again after installing squid.

<p>Peer and Client SNMP tables have been altered to handle IPv6 addresses.
 As a side effect of this the long-missing fix to show seperate named peers on one IP
 has been integrated. Making the SNMP peer table now produce correct output.
 The table structure change is identical for both IPv4-only and Dual modes but with
 IPv4-only simply not including any IPv6 entries. This means any third-party SNMP
 software which hard coded the MIB paths needs to be upgraded for this Squid release.


<sect2>Limitations of IPv6 Support

<p>Specify a specific tcp_outgoing_address and the clients who match its ACL are limited
 to the IPv4 or IPv6 network that address belongs to. They are not permitted over the
 IPv4-IPv6 boundary. Some ACL voodoo can however be applied to explicitly route the
 IPv6/IPv4 bound traffic (DIRECT access) out an appropriate interface.
<verb>
    acl toIP6 dst ipv6
    tcp_outgoing_address 2001::1 toIP6
    tcp_outgoing_address 10.0.0.1 !toIP6
</verb>

<p>WCCP is not available (neither version 1 or 2). It remains built into squid for use with IPv4 traffic but IPv6 cannot use it.

<p>Transparent Interception is done via NAT at the OS level and is not available in IPv6.
   Squid will ensure that any port set with transparent, intercept, or tproxy options be an IPv4-only
   listening address. Wildcard can still be used but will not open as an IPv6.
   To ensure that squid can accept IPv6 traffic on its default port, an alternative should
   be chosen to handle transparently intercepted traffic.
<verb>
   http_port 3128
   http_port 8080 intercept
</verb>

<p>The bundled NTLM Auth helper is IPv4-native between itself and the NTLM server.
   A new one will be needed for IPv6 traffic between the helper and server.

<p>The bundled RADIUS Auth helper is IPv4-native, both in traffic between and data storage
   with the RADIUS server. A new helper will be needed for IPv6 RADIUS protocol.


<sect1>Error Page Localization

<p>Details in <url url="http://wiki.squid-cache.org/Translations" name="The Squid wiki">

<sect2>Localization

<p>The error pages presented by squid may now be localized per-request to match the visitors local preferred language.

<p>The error_directory option in squid.conf needs to be removed.

<p>For best coverage of languages, using the latest language pack of error files is recommended.
Updates can be downloaded from <url url="http://www.squid-cahch.org/Versions/langpack/" name="www.squid-cache.org/Versions/langpack/">

<p>The squid developers are interested in making squid available in a wide variety of languages.
   Contribution of new languages is encouraged.

<sect2>CSS Stylesheet controls

<p>To further enhance the visitor experience all new translations have embeded CSS hooks for scalable per-site localization of the display.

<p>CSS display is controlled by updating the errorpage.css file installed into Squids configuration directory
   or the <em>err_page_stylesheet</em> option in squid.conf.

<p>Custom error pages can also embed the CSS content by adding the <em>%l</em> tag to their headers.


<sect1>Connection Pinning (for NTLM Auth Passthrough)

<p>Details in <url url="http://wiki.squid-cache.org/Features/ConnPinn" name="The Squid wiki">

<p>Squid 3.1 includes the much asked for Connection Pinning feature from Squid 2.6.

<p>This feature is often called 'NTLM Passthru' since it is a giant workaround which permits Web servers to use
Microsoft NTLM Authentication instead of HTTP standard authentication through a web proxy.


<sect1>Quality of Service (QoS) Flow support

<p>Details in <url url="http://wiki.squid-cache.org/Features/QualityOfService" name="The Squid wiki">

<p>Zero Penalty Hit created a patch to set QoS markers on outgoing traffic.

<itemize>
	<item>Allows you to select a TOS/Diffserv value to mark local hits.
	<item>Allows you to select a TOS/Diffserv value to mark peer hits.
	<item>Allows you to selectively set only sibling or sibling+parent requests
	<item>Allows any HTTP response towards clients will have the TOS value of the response coming from
		the remote server masked with the value of zph_preserve_miss_tos_mask.
		For this to work correctly, you will need to patch your linux kernel with the TOS preserving ZPH patch.
		The kernel patch can be downloaded from <url url="http://zph.bratcheda.org" name="http://zph.bratcheda.org">
	<item>Allows you to mask certain bits in the TOS received from the remote server,
		before copying the value to the TOS send towards clients.
</itemize>

<sect2>Squid Configuration
<p>Squid 3.1 needs to be configured with --enable-zph-qos for the ZPH QoS controls to be available.

<p>The configuration options for 2.7 and 3.1 are based on different ZPH patches.
The two releases configuration differs and is not at this point directly translatable.

<itemize>
<item><em>zph_tos_local</em>		Responses found as a HIT in the local cache
<item><em>zph_tos_peer</em>		Responses found as a HIT on peer caches.
<item><em>zph_tos_parent</em>		Qos to Sibling caches only or all peers.
<item><em>zph_preserve_miss_tos</em>	Use the same ToS settings received by Squid from the remote server,
					on the client connection. Requires a kernel patch.
</itemize>


<sect1>SSL Bump (for HTTPS Filtering and Adaptation)

<p>Details in <url url="http://wiki.squid-cache.org/Features/SslBump" name="The Squid wiki">

<p>Squid-in-the-middle decryption and encryption of straight CONNECT and transparently redirected SSL traffic,
using configurable client- and server-side certificates.
While decrypted, the traffic can be inspected using ICAP.


<sect1>eCAP Adaptation Module support

<p>Details in <url url="http://wiki.squid-cache.org/Features/eCAP" name="The Squid wiki">


<sect>Windows support
<P>This Squid version can run on Windows as a system service using the Cygwin emulation environment, 
or can be compiled in Windows native mode using the MinGW + MSYS development environment. Windows NT 4 SP4 and later are supported.<newline>
On Windows 2000 and later the service is configured to use the Windows Service Recovery option
restarting automatically after 60 seconds.

<sect1>Usage

<p>Some new command line options were added for the Windows service support:<newline>

<p>The service installation is made with -i command line switch, it's possible to use -f switch at
the same time for specify a different config-file settings for the Squid Service that will be
stored on the Windows Registry.

<p>A new -n switch specify the Windows Service Name, so multiple Squid instance are allowed.
<em/"Squid"/ is the default when the switch is not used.

<p>So, to install the service, the syntax is: 

<verb>squid -i [-f file] [-n name]</verb>

<p>Service uninstallation is made with -r command line switch with the appropriate -n switch.

<p>The -k switch family must be used with the appropriate -f and -n switches, so the syntax is: 

<verb>squid -k command [-f file] -n service-name</verb>
where <em/service-name/ is the name specified with -n options at service install time.

<p>To use the Squid original command line, the new -O switch must be used ONCE, the syntax is: 

<verb>squid -O cmdline [-n service-name]</verb>
<p>If multiple service command line options must be specified, use quote. The -n switch is
needed only when a non default service name is in use.

<p>Don't use the "Start parameters" in the Windows 2000/XP/2003 Service applet: they are
specific to Windows services functionality and Squid is not designed for understand they.

<p>In the following example the command line of the "squidsvc" Squid service is set to "-D -u 3130": 

<verb>squid -O "-D -u 3130" -n squidsvc</verb>

<sect1>PSAPI.DLL (Process Status Helper) Considerations

<p>The process status helper functions make it easier for you to obtain information about
processes and device drivers running on Microsoft® Windows NT®/Windows® 2000. These
functions are available in PSAPI.DLL, which is distributed in the Microsoft® Platform
Software Development Kit (SDK). The same information is generally available through the
performance data in the registry, but it is more difficult to get to it. PSAPI.DLL is
freely redistributable.

<p>PSAPI.DLL is available only on Windows NT, 2000, XP and 2003. The implementation in Squid is
aware of this, and try to use it only on the right platform.

<p>On Windows NT PSAPI.DLL can be found as component of many applications, if you need it,
you can find it on Windows NT Resource KIT. If you have problem, it can be
downloaded from here:
<url url="http://download.microsoft.com/download/platformsdk/Redist/4.0.1371.1/NT4/EN-US/psinst.EXE" name="http://download.microsoft.com/download/platformsdk/Redist/4.0.1371.1/NT4/EN-US/psinst.EXE">

<p>On Windows 2000 and later it is available installing the Windows Support Tools, located on the
Support\Tools folder of the installation Windows CD-ROM.

<sect1>Registry DNS lookup

<p>On Windows platforms, if no value is specified in the <em/dns_nameservers/ option on
squid.conf or in the /etc/resolv.conf file, the list of DNS name servers are
taken from the Windows registry, both static and dynamic DHCP configurations
are supported.

<sect1>Compatibility Notes
<p>
<itemize>
<item>It's recommended to use '/' char in Squid paths instead of '\'
<item>Paths with spaces (like 'C:\Programs Files\Squid) are NOT supported by Squid
<item>When using ACL like 'acl aclname acltype "file"' the file must be in DOS text
format (CR+LF) and the full Windows path must be specified, for example:

<verb>acl blocklist url_regex -i "c:/squid/etc/blocked1.txt"</verb>

<item>The Windows equivalent of '/dev/null' is 'NUL'
<item>Squid doesn't know how to run external helpers based on scripts, like .bat, .cmd,
.vbs, .pl, etc. So in squid.conf the interpreter path must be always specified, for example:

<verb>redirect_program c:/perl/bin/perl.exe c:/squid/libexec/redir.pl
redirect_program c:/winnt/system32/cmd.exe /C c:/squid/libexec/redir.cmd</verb>
<item>When Squid runs in command line mode, the launching user account must have administrative privilege on the system
<item>"Start parameters" in the Windows 2000/XP/2003 Service applet cannot be used
</itemize>


<sect1>Known Limitations
<p>
<itemize>
<item>Squid features not operational:<newline>
<itemize>
<item>DISKD: still needs to be ported<newline>
<item>WCCP: cannot work because user space GRE support on Windows is missing<newline>
<item>Transparent Proxy: missing Windows non commercial interception driver<newline>
</itemize>
<item>Some code sections can make blocking calls.
<item>Some external helpers may not work.
<item>File Descriptors number hard-limited to 2048 when building with MinGW.
</itemize>

<sect1>Building Squid on Windows

<p>A reasonably recent release of <url url="http://www.cygwin.com/" name="Cygwin"> or <url url="http://www.mingw.org/" name="MinGW"> is needed.<newline>
The usage of the Cygwin environment is very similar to other Unix/Linux environments, and -devel version of libraries must be installed.<newline>
For the MinGW environment, the packages MSYS, MinGW and msysDTK must be installed. Some additional libraries and tools must be downloaded separately:<newline><newline>
OpenSSL: <url url="http://www.slproweb.com/products/Win32OpenSSL.html" name="Shining Light Productions Win32 OpenSSL"><newline>
libcrypt: <url url="http://sourceforge.net/projects/mingwrep/" name="MinGW packages repository"><newline>
db-1.85: <url url="http://tinycobol.org/download.html" name="TinyCOBOL download area"><newline>
When running configure, --disable-wccp and --disable-wccpv2 options should always specified to avoid compile errors.<newline>
<itemize>
<item>New configure options:<newline>
<itemize>
<item>--enable-win32-service<newline>
</itemize>
<item>Updated configure options:<newline>
<itemize>
<item>--enable-arp-acl<newline>
<item>--enable-default-hostsfile<newline>
</itemize>
<item>Unsupported configure options:<newline>
<itemize>
<item>--enable-coss-aio-ops: On Windows Posix AIO is not available<newline>
<item>--with-large-files: No suitable build environment is available on both Cygwin and MinGW, but --enable-large-cache-files works fine<newline>
</itemize>
<item>Recommended configure minimal options for Windows:<newline>
<itemize>
<item>--prefix=c:/squid --disable-wccp --disable-wccpv2 --enable-win32-service --enable-default-hostsfile=none
</itemize>
</itemize>
<newline>
Before build Squid with SSL support, some operations are needed (in the following example OpenSSL is installed in C:\OpenSSL and MinGW in C:\MinGW):
<itemize>
<item>Copy C:\OpenSSL\lib\MinGW content to C:\MinGW\lib<newline>
<item>Copy C:\OpenSSL\include\openssl content to C:\MinGW\include\openssl<newline>
<item>Rename C:\MinGW\lib\ssleay32.a to C:\MinGW\lib\libssleay32.a<newline>
</itemize>

<sect1>Using cache manager on Windows:
<p>On Windows, cache manager (cachemgr.cgi) can be used with Microsoft IIS or Apache.<newline>
Some specific configuration could be needed:<newline>
<itemize>
<item>IIS 6 (Windows 2003):<newline>
<itemize>
<item>On IIS 6.0 all CGI extensions are denied by default for security reason, so the following configuration is needed:<newline>
<itemize>
<item>Create a cgi-bin Directory
<item>Define the cgi-bin IIS Virtual Directory with read and CGI execute IIS
permissions, ASP scripts are not needed. This automatically defines a
cgi-bin IIS web application 
<item>Copy cachemgr.cgi into cgi-bin directory and look to file permissions:
the IIS system account and SYSTEM must be able to read and execute the file
<item>In IIS manager go to Web Service extensions and add a new Web Service
Extension called <em/"Squid Cachemgr"/, add the cachemgr.cgi file and set the
extension status to <em/Allowed/
</itemize>
</itemize>
<item>Apache:<newline>
<itemize>
<item>On Windows, cachemgr.cgi needs to create a temporary file, so Apache must be instructed
 to pass the TMP and TEMP Windows environment variables to CGI applications:<newline>
<verb>
ScriptAlias /squid/cgi-bin/ "c:/squid/libexec/"
&lt;Location /squid/cgi-bin/cachemgr.cgi&gt;
    PassEnv TMP TEMP
    Order allow,deny
    Allow from workstation.example.com
&lt;/Location&gt;
</verb>
</itemize>
</itemize>


<sect>Changes to squid.conf since Squid-3.0
<p>
There have been changes to Squid's configuration file since Squid-3.0.

This section gives a thorough account of those changes in three categories:

<itemize>
	<item><ref id="newtags" name="New tags">
	<item><ref id="modifiedtags" name="Changes to existing tags">
	<item><ref id="removedtags" name="Removed tags">
</itemize>
<p>


<sect1>New tags<label id="newtags">
<p>
<descrip>
	<tag>acl_uses_indirect_client</tag>
	<p>Whether to use any result found by follow_x_forwarded_for in further ACL processing.
	   Default: ON
	<verb>
	Controls whether the indirect client address
	(see follow_x_forwarded_for) is used instead of the
	direct client address in acl matching.
	</verb>

	<tag>adaptation_access</tag>
	<p>Sends an HTTP transaction to an ICAP or eCAP adaptation service.
	<verb>
	adaptation_access service_name allow|deny [!]aclname...
	adaptation_access set_name     allow|deny [!]aclname...

	At each supported vectoring point, the adaptation_access
	statements are processed in the order they appear in this
	configuration file. Statements pointing to the following services
	are ignored (i.e., skipped without checking their ACL):

	    - services serving different vectoring points
	    - "broken-but-bypassable" services
	    - "up" services configured to ignore such transactions
	       (e.g., based on the ICAP Transfer-Ignore header).

	When a set_name is used, all services in the set are checked
	using the same rules, to find the first applicable one. See
	adaptation_service_set for details.

	If an access list is checked and there is a match, the
	processing stops: For an "allow" rule, the corresponding
	adaptation service is used for the transaction. For a "deny"
	rule, no adaptation service is activated.

	It is currently not possible to apply more than one adaptation
	service at the same vectoring point to the same HTTP transaction.

	See also: icap_service and ecap_service
	</verb>

	<tag>adaptation_service_set</tag>
	<verb>
	Defines a named adaptation service set. The set is populated in
	the order of adaptation_service_set directives in this file.
	When adaptation ACLs are processed, the first and only the first
	applicable adaptation service from the set will be used. Thus,
	the set should group similar, redundant services, rather than a
	chain of complementary services.

	If you have a single adaptation service, you do not need to
	define a set containing it because adaptation_access accepts
	service names.

	Example:
	      adaptation_service_set svcBlocker urlFilterPrimary urlFilterBackup
	      adaptation service_set svcLogger loggerLocal loggerRemote
	</verb>

	<tag>delay_pool_uses_indirect_client</tag>
	<p>Whether to use any result found by follow_x_forwarded_for in delay_pool assignment.
	   Default: ON
	<verb>
	Controls whether the indirect client address
	(see follow_x_forwarded_for) is used instead of the
	direct client address in delay pools.
	</verb>

        <tag>dns_v4_fallback</tag>
        <p>New option to prevent squid from always looking up IPv4 regardless of whether IPv6 addresses are found.
           Squid will follow a policy of prefering IPv6 links, keeping the IPv4 only as a safety net behind IPv6.
        <verb>
        Standard practice with DNS is to lookup either A or AAAA records
        and use the results if it succeeds. Only looking up the other if
        the first attempt fails or otherwise produces no results.

        That policy however will cause squid to produce error pages for some
        servers that advertise AAAA but are unreachable over IPv6.

        If this is ON  squid will always lookup both AAAA and A, using both.
        If this is OFF squid will lookup AAAA and only try A if none found.

        WARNING: There are some possibly unwanted side-effects with this on:
                *) Doubles the load placed by squid on the DNS network.
                *) May negatively impact connection delay times.
        </verb>

	<tag>ecap_enable</tag>
	<p>Controls whether eCAP support is enabled. Default: OFF

	<tag>ecap_service</tag>
	<p>Defines a single eCAP service
	<verb>
	ecap_service servicename vectoring_point bypass service_url

	vectoring_point = reqmod_precache|reqmod_postcache|respmod_precache|respmod_postcache
	        This specifies at which point of transaction processing the
	        eCAP service should be activated. *_postcache vectoring points
	        are not yet supported.

	bypass = 1|0
	        If set to 1, the eCAP service is treated as optional. If the
	        service cannot be reached or malfunctions, Squid will try to
	        ignore any errors and process the message as if the service
	        was not enabled. No all eCAP errors can be bypassed.
	        If set to 0, the eCAP service is treated as essential and all
	        eCAP errors will result in an error page returned to the
	        HTTP client.

	service_url = ecap://vendor/service_name?custom&amp;cgi=style&amp;parameters=optional

	Example:
	      ecap_service service_1 reqmod_precache 0 ecap://filters-R-us/leakDetector?on_error=block
	      ecap_service service_2 respmod_precache 1 icap://filters-R-us/virusFilter?config=/etc/vf.cfg
	</verb>

	<tag>err_page_stylesheet</tag>
	<p>New option to configure location for CSS stylesheet controlling error page display.

        <tag>error_default_language</tag>
        <p>New option to replace the old configure option --enable-default-err-language
	   New translations can be downloaded from http://www.squid-cache.org/Versions/langpack/
        <verb>
        Set the default language which squid will send error pages in
        if no existing translation matches the clients language
        preferences.

        If unset (default) generic English will be used.
	</verb>

	<tag>error_log_languages</tag>
	<p>
	<verb>
	Log to cache.log what languages users are attempting to
	auto-negotiate for translations.

	Successful negotiations are not logged. Only failures
	have meaning to indicate that Squid may need an upgrade
	of its error page translations.
	</verb>

	<tag>follow_x_forwarded_for</tag>
	<p>Enable processing of the X-Forwarded-for header for various administration tasks.
	<verb>
	Allowing or Denying the X-Forwarded-For header to be followed to
	find the original source of a request.

	Requests may pass through a chain of several other proxies
	before reaching us.  The X-Forwarded-For header will contain a
	comma-separated list of the IP addresses in the chain, with the
	rightmost address being the most recent.

	If a request reaches us from a source that is allowed by this
	configuration item, then we consult the X-Forwarded-For header
	to see where that host received the request from.  If the
	X-Forwarded-For header contains multiple addresses, and if
	acl_uses_indirect_client is on, then we continue backtracking
	until we reach an address for which we are not allowed to
	follow the X-Forwarded-For header, or until we reach the first
	address in the list.  (If acl_uses_indirect_client is off, then
	it's impossible to backtrack through more than one level of
	X-Forwarded-For addresses.)

	The end result of this process is an IP address that we will
	refer to as the indirect client address.  This address may
	be treated as the client address for access control, delay
	pools and logging, depending on the acl_uses_indirect_client,
	delay_pool_uses_indirect_client and log_uses_indirect_client
	options.

	SECURITY CONSIDERATIONS:
		Any host for which we follow the X-Forwarded-For header
		can place incorrect information in the header, and Squid
		will use the incorrect information as if it were the
		source address of the request.  This may enable remote
		hosts to bypass any access control restrictions that are
		based on the client's source addresses.

	For example:

		acl localhost src 127.0.0.1
		acl my_other_proxy srcdomain .proxy.example.com
		follow_x_forwarded_for allow localhost
		follow_x_forwarded_for allow my_other_proxy
	</verb>

	<tag>ftp_epsv_all</tag>
	<verb>
	FTP Protocol extensions permit the use of a special "EPSV ALL" command.

	NATs may be able to put the connection on a "fast path" through the
	translator, as the EPRT command will never be used and therefore,
	translation of the data portion of the segments will never be needed.

	When a client only expects to do two-way FTP transfers this may be useful.
	If squid finds that it must do a three-way FTP transfer after issuing
	an EPSV ALL command, the FTP session will fail.

	If you have any doubts about this option do not use it.
	Squid will nicely attempt all other connection methods.

	Requires ftp_passive to be ON (default)
	</verb>

	<tag>include</tag>
	<p>New option to import entire secondary configuration files into squid.conf.
	<verb>
	Squid will follow the files immediately and insert all their content
	as if it was at that position in squid.conf. As per squid.conf some
	options are order-specific within the config as a whole.

	A few layers of include are allowed, but too many are confusing and
	squid will enforce an include depth of 16 files.

	Syntax:
		include /path/to/file1 /path/to/file2
	</verb>

	<tag>loadable_modules</tag>
	<p>Instructs Squid to load the specified dynamic module(s) or activate
	preloaded module(s).
	<verb>
	Example:
	      loadable_modules @DEFAULT_PREFIX@/lib/MinimalAdapter.so
	</verb>

	<tag>log_uses_indirect_client</tag>
	<p>Whether to use any result found by follow_x_forwarded_for in access.log.
	   Default: ON
	<verb>
	Controls whether the indirect client address
	(see follow_x_forwarded_for) is used instead of the
	direct client address in the access log.
	</verb>

	<tag>netdb_filename</tag>
	<verb>
	A filename where Squid stores it's netdb state between restarts.
	To disable, enter "none".
	</verb>

        <tag>pinger_enable</tag>
        <p>New option to enable/disable the ICMP pinger helper with a reconfigure instead of a full rebuild.
        <verb>
        Control whether the pinger is active at run-time.
        Enables turning ICMP pinger on and off with a simple squid -k reconfigure.
        default is on when --enable-icmp is compiled in.
        </verb>

	<tag>ssl_bump</tag>
	<p>New Access control for which CONNECT requests to an http_port
	marked with an sslBump flag are actually "bumped". Please
	see the sslBump flag of an http_port option for more details
	about decoding proxied SSL connections.
	DEFAULT: No requests are bumped.
	<verb>
NOCOMMENT_START
# Example: Bump all requests except those originating from localhost and
# those going to webax.com or example.com sites.
#
# acl broken_sites dstdomain .webax.com
# acl broken_sites dstdomain .example.com
# ssl_bump deny localhost
# ssl_bump deny broken_sites
# ssl_bump allow all
	</verb>

	<tag>sslproxy_cert_error</tag>
	<p>New Access Control to selectively bypass server certificate validation errors.
	   DEFAULT: None bypassed.
	<verb>
	For example, the following lines will bypass all validation errors
	when talking to servers located at 172.16.0.0/16. All other
	validation errors will result in ERR_SECURE_CONNECT_FAIL error.

		acl BrokenServersAtTrustedIP dst 172.16.0.0/16
		sslproxy_cert_error allow BrokenServersAtTrustedIP
		sslproxy_cert_error deny all

	This option must use fast ACL expressions only. Expressions that use
	external lookups or communication result in unpredictable behavior or
	crashes.

	Without this option, all server certificate validation errors
	terminate the transaction. Bypassing validation errors is dangerous
	because an error usually implies that the server cannot be trusted and
	the connection may be insecure.

	See also: sslproxy_flags and DONT_VERIFY_PEER.
	</verb>

	<tag>zph_preserve_miss_tos</tag>
	<verb>
	If set to on (default), any HTTP response towards clients will
	have the TOS value of the response comming from the remote
	server masked with the value of zph_preserve_miss_tos_mask.
	For this to work correctly, you will need to patch your linux
	kernel with the TOS preserving ZPH patch.
	The kernel patch can be downloaded from http://zph.bratcheda.org
	</verb>

	<tag>zph_preserve_miss_tos_mask</tag>
	<verb>
	Allows you to mask certain bits in the TOS received from the
	remote server, before copying the value to the TOS send towards
	clients.
	Default: 0xFF (255) (TOS from server is not changed).
	</verb>

	<tag>zph_tos_local</tag>
	<verb>
	Allows you to select a TOS/Diffserv value to mark local hits. Read above
	(tcp_outgoing_tos) for details/requirements about TOS.
	Default: 0 (disabled).
	</verb>

	<tag>zph_tos_parent</tag>
	<verb>
	Set this to off if you want only sibling hits to be marked.
	If set to on (default), parent hits are being marked too.
	</verb>

	<tag>zph_tos_peer</tag>
	<verb>
	Allows you to select a TOS/Diffserv value to mark peer hits. Read above
	(tcp_outgoing_tos) for details/requirements about TOS.
	Default: 0 (disabled).
	</verb>


</descrip>

<sect1>Changes to existing tags<label id="modifiedtags">
<p>
<descrip>
	<tag>acl dst ipv6</tag>
	<p>New preset content - ipv6 - available as a preset type in the src and dst ACL matching all of the public IPv6 network space.
        <verb>
	acl aclname dst ipv6
        </verb>

	<tag>acl myportname peername</tag>
	<p>New acl type myportname, matching the name of the http(s)_port where the request was accepted.
	<p>New acl type peername, matching against a named cache_peer entry where the request will be attempted first.
	   NP: peername currently is limited to only match the first peer possible.
        <verb>
        acl aclname myportname 3128 ...         # http(s)_port name
	acl aclname peername myPeer ...		# cache_peer ... name=myPeer
	</verb>

	<tag>auth_param ntlm</tag>
	<p>The helper binary bundled with Squid under the name <em>ntlm_auth</em> has been renamed to accurately reflect
	   its real behavior and to prevent confusion with the more useful Samba helper using the same name.
	<p>Despite being used for NTLM, the helper does not in fact provide true NTLM function. What it does provide is
	   SMB LanManager authentication through the NTLM interface without the need for a domain controller. Thus the 
	   new name is <em>ntlm_smb_lm_auth</em>.
	<p>WARNING: due to the name clash with Samba helper, admin should be careful to only update their squid.conf if the
	   squid bundled binary is used and needed. If the Samba helper is in use, the squid.conf should not be altered.

        <tag>balance_on_multiple_ip</tag>
        <p>The previous default behavour (rotate per-request) of this setting causes failover clashes with IPv6 built-in mechanisms.
           It has thus been turned off by default. Making the 'best choice' IP continue in use for any hostname until it encounters a connection failure and failover drops to the next known IP.
        <verb>
	Modern IP resolvers in squid sort lookup results by preferred access.
	By default squid will use these IP in order and only rotates to
	the next listed when the most preffered fails.

	Some load balancing servers based on round robin DNS have been
	found not to preserve user session state across requests
	to different IP addresses.

	Enabling this directive Squid rotates IP's per request.
        </verb>

	<tag>cache</tag>
	<p>Removed the 'QUERY' acl and 'cache deny QUERY' entries.
	   Replaced by new refresh_pattern instead.

	<tag>cache_dir</tag>
	<p>Default changed to 256MB in-memory cache.
	   see cache_mem and maximum_object_size_in_memory for size parameters.
	<p>'null' storage type dropped. In-memory cache is always present. Remove all cache_dir options to prevent on-disk caching.

	<tag>cache_mem</tag>
	<p>Default size increased to 256MB.

	<tag>cache_peer htcp-no-clr htcp-no-purge-clr htcp-only-clr htcp-forward-clr connection-auth[=on|off|auto]</tag>
	<p>New Options.
	<verb>
	use 'htcp-no-clr' to send HTCP to the neighbor but without
	sending any CLR requests.  This cannot be used with
	htcp-only-clr.

	use 'htcp-no-purge-clr' to send HTCP to the neighbor
	including CLRs but only when they do not result from
	PURGE requests.

	use 'htcp-only-clr' to send HTCP to the neighbor but ONLY
	CLR requests.  This cannot be used with htcp-no-clr.

	use 'htcp-forward-clr' to forward any HTCP CLR requests
	this proxy receives to the peer.

	use 'connection-auth=off' to tell Squid that this peer does
	not support Microsoft connection oriented authentication,
	and any such challenges received from there should be
	ignored. Default is 'auto' to automatically determine the
	status of the peer.
	</verb>

	<tag>cache_store_log</tag>
	<p>Default changed to OFF. Matching long-standing developer recommendations.

	<tag>error_directory</tag>
	<p>Now an optional entry in squid.conf. If present it will force all visitors to receive the error pages
	contained in the directory it points at. If absent, error page localization will be given a chance.
	<verb>
        If you wish to create your own versions of the default
        error files to customize them to suit your company COPY
        the error/template files to another directory and point
        this tag at them.

        WARNING: This option will disable multi-language support
                 on error pages if used.
	</verb>

        <tag>external_acl_type</tag>
        <p>New options 'ipv4' and 'ipv6' are added to set the IPv4/v6 protocol between squid and its helpers.
           Please be aware of some limits to these options. These options only affet the transport protocol used
	   to send data to and from the helpers. Squid in IPv6-mode may still send %SRC addresses in IPv4 or IPv6
	   format, so all helpers will need to be checked and converted to cope with such information cleanly.
        <verb>
          ipv4 / ipv6   IP-mode used to communicate to this helper.
                        For compatability with older configurations and helpers
                        'ipv4' is the default unless --with-localhost-ipv6 is used.
                        --with-localhost-ipv6 changes the default to 'ipv6'.
                        SPECIAL NOTE: explicit use of these options override --with-localhost-ipv6
        </verb>
	<p>New header input format specifiers. To seperate Request and Reply headers when both passed back.
	<verb>
	%>{Header}        HTTP request header
	%>{Hdr:member}    HTTP request header list member
	%>{Hdr:;member}   HTTP request header list member using ; as
	                  list separator. ; can be any non-alphanumeric
	                  character.
	
	%<{Header}        HTTP reply header
	%<{Hdr:member}    HTTP reply header list member
	%<{Hdr:;member}   HTTP reply header list member using ; as
	                  list separator. ; can be any non-alphanumeric
	                  character.
	</verb>

	<tag>forwarded_for</tag>
	<p>New setting options. transparent, truncate, delete.
	<verb>
	If set to "transparent", Squid will not alter the
	X-Forwarded-For header in any way.

	If set to "delete", Squid will delete the entire
	X-Forwarded-For header.

	If set to "truncate", Squid will remove all existing
	X-Forwarded-For entries, and place itself as the sole entry.
	</verb>

	<tag>http_port transparent</tag>
	<p>Option 'transparent' is being deprecated in favour of 'intercept' which more clearly identifies what the option does.
	For now option 'tproxy' remains with old behaviour meaning fully-invisible proxy using TPROXY support.</p>

	<tag>http(s)_port intercept sslbump connection-auth[=on|off]</tag>
	<p>New port options
        <verb>
           intercept    Rename of old 'transparent' option to indicate proper functionality.

	   connection-auth[=on|off]
	                use connection-auth=off to tell Squid to prevent
	                forwarding Microsoft connection oriented authentication
	                (NTLM, Negotiate and Kerberos)

	   keepalive[=idle,interval,timeout]
	                Enable TCP keepalive probes of idle connections
	                idle is the initial time before TCP starts probing
	                the connection, interval how often to probe, and
	                timeout the time before giving up.

	   sslBump      Intercept each CONNECT request matching ssl_bump ACL,
	                establish secure connection with the client and with
	                the server, decrypt HTTP messages as they pass through
	                Squid, and treat them as unencrypted HTTP messages,
	                becoming the man-in-the-middle.

	                When this option is enabled, additional options become
	                available to specify SSL-related properties of the
	                client-side connection: cert, key, version, cipher,
	                options, clientca, cafile, capath, crlfile, dhparams,
	                sslflags, and sslcontext. See the https_port directive
	                for more information on these options.

	                The ssl_bump option is required to fully enable
	                the SslBump feature.
        </verb>

	<tag>maximum_object_size_in_memory</tag>
	<p>Default size limit increased to 512KB.

	<tag>negative_ttl</tag>
	<p>New default of 0 seconds. To prevent negative-caching of failure messages unless explicitly
	   permitted by the message generating web server.
	<p>Changing this is an RFC 2616 violation and now requires --enable-http-violations

	<tag>refresh_pattern</tag>
	<p>New set of basic patterns. These should always be listed after any custom ptterns.
	   They ensure RFC compliance with certain protocol and request handling in the absence
	   of accurate Cache-Control: and Expires: information.
	<verb>
refresh_pattern ^ftp:             1440   20%    10080
refresh_pattern ^gopher:          1440    0%     1440
refresh_pattern -i (/cgi-bin/|\?)    0    0%        0
refresh_pattern .                    0   20%     4320
	</verb>

	<tag>reply_header_max_size</tag>
	<p>Default limit increased to 64KB for RFC 2616 compliance.

	<tag>request_header_max_size</tag>
	<p>Default limit increased to 64KB for RFC 2616 compliance.

        <tag>tcp_outgoing_address</tag>
        <p>This option causes some problems when bridging IPv4 and IPv6. A workaround has been provided.
        <verb>
        Squid is built with a capability of bridging the IPv4 and IPv6 internets.
        tcp_outgoing_address as previously used breaks this bridging by forcing
        all outbound traffic through a certain IPv4 which may be on the wrong
        side of the IPv4/IPv6 boundary.

        To operate with tcp_outgoing_address and keep the bridging benefits
        an additional ACL needs to be used which ensures the IPv6-bound traffic
        is never forced or permitted out the IPv4 interface.

        acl to_ipv6 dst ipv6
        tcp_outgoing_address 2002::c001 good_service_net to_ipv6
        tcp_outgoing_address 10.0.0.2 good_service_net !to_ipv6

        tcp_outgoing_address 2002::beef normal_service_net to_ipv6
        tcp_outgoing_address 10.0.0.1 normal_service_net !to_ipv6

        tcp_outgoing_address 2002::1 to_ipv6
        tcp_outgoing_address 10.0.0.3 !to_ipv6
        </verb>

	<tag>wccp2_assignment_method hash mask</tag>
	<p>Method names now accepted. Replacing the old magic numbers.
	   '1' becomes 'hash' and '2' becomes 'mask'

	<tag>wccp2_forwarding_method gre l2</tag>
	<p>Method names now accepted. Replacing the old magic numbers.
	   '1' becomes 'gre' and '2' becomes 'l2'

	<tag>wccp2_return_method gre l2</tag>
	<p>Method names now accepted. Replacing the old magic numbers.
	   '1' becomes 'gre' and '2' becomes 'l2'


</descrip>


<sect1>Removed tags<label id="removedtags">
<p>
<descrip>

	<tag>dns_testnames</tag>
	<p>Obsolete. This feature is no longer relevant to modern networks and was causing boot problems.
	   The -D command line option used previously to suppress these tests is also obsolete.

	<tag>extension_methods</tag>
	<p>Obsolete. All possible methods are now accepted and handled properly.</p>

	<tag>icap_class</tag>
	<p>Replaced by adaptation_service_set.</p>

	<tag>icap_access</tag>
	<p>Replaced by adaptation_access.</p>

</descrip>


<sect>Changes to ./configure options since Squid-3.0
<p>
There have been some changes to Squid's build configuration since Squid-3.0.

This section gives an account of those changes in three categories:

<itemize>
	<item><ref id="newoptions" name="New options">
	<item><ref id="modifiedoptions" name="Changes to existing options">
	<item><ref id="removedoptions" name="Removed options">
</itemize>


<sect1>New options<label id="newoptions">
<p>
<descrip>
	<tag>--enable-ecap</tag>
	<p>Build with support for loadable content adaptation modules.
	   Cannot be used with --disable-loadable-modules.

	<tag>--enable-follow-x-forwarded-for</tag>
	<p>Support following the X-Forwarded-For HTTP header for determining the
	   original or indirect client when a request has been forwarded through other
	   proxies.

	<tag>--enable-zph-qos</tag>
	<p>Build with support for ZPH Quality of Service controls

	<tag>--disable-auto-locale</tag>
	<p>Disable error page localization for visitors.
	<p>error_directory option is required if this option is used.

	<tag>--disable-ipv6</tag>
	<p>Build without IPv6 support. The default is to auto-detect system capabilities
	   and build with IPv6 when possible.

	<tag>--disable-loadable-modules</tag>
	<p>Build without support for loadable modules.

        <tag>--with-dns-cname</tag>
        <p>Enable CNAME recursion within the Internal DNS resolver stub squid uses.
           This has no effect on the external DNS helper.
        <p>Please note this extension is still experimental and may encounter problems.
	   To see if it is actually needed you can run squid without it for a period and
	   check the CNAME-Only Requests statistics squid maintains.
	<p>If it produces ongoing serious problems the external helper may be needed
	   but please report the bugs anyway.

	<tag>--with-localhost-ipv6</tag>
	<p>Build support for squid to map all 127.0.0.1 traffic onto ::1.
           The default is to build with 127.0.0.1 and ::1 being considered seperate IP.
           see the IPv6 details above for a better description.
	<p>WARNING: This is an RFC violation. Use is discouraged.

	<tag>--with-logdir=PATH</tag>
	<p>Allow build-time configuration of Default location for squid logs.

        <tag>--with-ipv6-split-stack</tag>
        <p>Enable special additions for IPv6 support in Windows XP.
           see the IPv6 details above for a better description.

	<tag>--with-po2html=PATH</tag>
	<p>Absolute path to po2html executable.
	   Default is to automatically detect the binary.

</descrip>

<sect1>Changes to existing options<label id="modifiedoptions">
<p>
<descrip>
	<tag>--enable-shared[=PKGS]</tag>
	<p>Default changed to yes.

	<tag>--enable-linux-netfilter</tag>
	<p>This option now enables support for all three netfilter interception targets.
	<p>Adding TPROXY version 4+ support to squid through the netfilter TPROXY target.
	   This options requires a linux kernel 2.6.25 or later for embeded netfilter TPROXY targets.
	<p>Older REDIRECT and DNAT targets work as before on HTTP ports marked 'intercept'.

	<tag>--enable-linux-tproxy</tag>
	<p>Deprecated. Remains only to support old TPROXY version 2.2 installations.

	<tag>--enable-ntlm-auth-helpers</tag>
	<p>Helper previously built by <em>SMB</em> is now built by <em>smb_lm</em>.
	   It also has a new squid.conf name for usage, see <em>auth_param</em> above for details.

	<tag>--disable-internl-dns</tag>
	<p>Better support for Linux using the external DNS helper.
           The helper will now compile and work with dns_nameservers on more variants of Linux than previously.

</descrip>
</p>

<sect1>Removed options<label id="removedoptions">
<p>
<descrip>
	<tag>--enable-default-err-language</tag>
	<p>Replaced by error_default_language squid.conf option

	<tag>--enable-err-languages</tag>
	<p>Removed. All languages used now for error page localization.

	<tag>--disable-carp</tag>
	<p>Removed. CARP is required by several peering algoithms. Disabling is not useful.
</descrip>


<sect>Options Removed since Squid-2

<p>Some squid.conf and ./configure options which were available in Squid-2.6 and Squid-2.7 are made obsolete in Squid-3.1.

<sect1>Removed squid.conf options since Squid-2.7
<p>
<descrip>
	<tag>auth_param</tag>
	<p><em>blankpassword</em> option for basic scheme removed.

	<tag>external_acl_type</tag>
	<p>Format tag <em>%{Header}</em> replaced by <em>%>{Header}</em>
	<p>Format tag <em>%{Header:member}</em> replaced by <em>%>{Header:member}</em>

	<tag>header_access</tag>
	<p>Replaced by <em>request_header_access</em> and <em>reply_header_access</em>

	<tag>http_port</tag>
	<p><em>no-connection-auth</em> replaced by <em>connection-auth=[on|off]</em>. Default is ON.
	<p><em>tcpkeepalive=</em> replaced by <em>keepalive=</em>
	<p><em>transparent</em> option replaced by <em>intercept</em>

	<tag>httpd_accel_no_pmtu_disc</tag>
	<p>Replaced by <em>http_port disable-pmtu-discovery=</em> option

	<tag>redirector_bypass</tag>
	<p>Replaced by <em>url_rewrite_bypass</em>

	<tag>zph_local</tag>
	<p>Replaced by <em>zph_tos_local</em>

	<tag>zph_mode</tag>
	<p>Obsolete.

	<tag>zph_option</tag>
	<p>Obsolete.

	<tag>zph_parent</tag>
	<p>Replaced by <em>zph_tos_peer</em> and <em>zph_tos_parent</em>

	<tag>zph_sibling</tag>
	<p>Replaced by <em>zph_tos_peer</em>

</descrip>

<sect1>Removed squid.conf options since Squid-2.6
<p>
<descrip>
	<tag>cache_dir</tag>
	<p><em>read-only</em> option replaced by <em>no-store</em>.

</descrip>

<sect1>Removed ./configure options since Squid-2.7
<p>
<descrip>
	<tag>--enable-coss-aio-ops</tag>
	<p>Obsolete.

	<tag>--enable-devpoll</tag>
	<p>Replaced by automatic detection.

	<tag>--enable-dlmalloc=LIB</tag>
	<p>Obsolete.

	<tag>--enable-epoll</tag>
	<p>Replaced by automatic detection.

	<tag>--enable-forward-log</tag>
	<p>Obsolete.

	<tag>--enable-heap-replacement</tag>
	<p>Obsolete.

	<tag>--enable-htcp</tag>
	<p>Obsolete. Enabled by default.

	<tag>--enable-large-cache-files</tag>
	<p>Obsolete.

	<tag>--enable-mempool-debug</tag>
	<p>Obsolete.

	<tag>--enable-multicast-miss</tag>
	<p>Obsolete.

	<tag>--enable-poll</tag>
	<p>Replaced by automatic detection.

	<tag>--enable-select</tag>
	<p>Replaced by automatic detection.

	<tag>--enable-select-simple</tag>
	<p>Replaced by automatic detection.

	<tag>--enable-snmp</tag>
	<p>Obsolete. Enabled by default.

	<tag>--enable-truncate</tag>
	<p>Obsolete.

	<tag>--disable-kqueue</tag>
	<p>Obsolete. Disabled by default.

</descrip>


<sect>Regressions since Squid-2.7

<p>Some squid.conf and ./configure options which were available in Squid-2.7 are not yet available in Squid-3.1

<p>If you need something to do then porting one of these from Squid-2 to Squid-3 is most welcome.

<sect1>Missing squid.conf options available in Squid-2.7
<p>
<descrip>
	<tag>acl</tag>
	<p><em>urllogin</em> option
	<p><em>urlgroup</em> option

	<tag>auth_param</tag>
	<p><em>concurrency</em> option

	<tag>authenticate_ip_shortcircuit_access</tag>

	<tag>authenticate_ip_shortcircuit_ttl</tag>

	<tag>broken_vary_encoding</tag>

	<tag>cache_dir</tag>
	<p><em>min-size</em> option
	<p><em>COSS</em> storage type is lacking stability fixes.
	<p>COSS <em>overwrite-percent=</em> option
	<p>COSS <em>max-stripe-waste=</em> option
	<p>COSS <em>membufs=</em> option
	<p>COSS <em>maxfullbufs=</em> option

	<tag>cache_peer</tag>
	<p><em>monitorinterval=</em>
	<p><em>monitorsize=</em>
	<p><em>monitortimeout=</em>
	<p><em>monitorurl=</em>
	<p><em>multicast-siblings</em>
	<p><em>idle=</em>
	<p><em>http11</em>

	<tag>cache_vary</tag>

	<tag>clientside_tos</tag>

	<tag>collapsed_forwarding</tag>

	<tag>error_map</tag>

	<tag>external_acl_type</tag>
	<p><em>%ACL</em>
	<p><em>%DATA</em>

	<tag>external_refresh_check</tag>

	<tag>http_access2</tag>

	<tag>http_port</tag>
	<p><em>act-as-origin</em>
	<p><em>allow-direct</em>
	<p><em>http11</em>
	<p><em>urlgroup=</em>

	<tag>ignore_expect_100</tag>

	<tag>ignore_ims_on_miss</tag>

	<tag>incoming_rate</tag>

	<tag>location_rewrite_access</tag>

	<tag>location_rewrite_children</tag>

	<tag>location_rewrite_concurrency</tag>

	<tag>location_rewrite_program</tag>

	<tag>logfile_daemon</tag>

	<tag>logformat</tag>
	<p><em>%oa</em>
	<p><em>%sn</em>

	<tag>max_filedescriptors / max_filedesc</tag>

	<tag>max_stale</tag>

	<tag>refresh_pattern</tag>
	<p><em>stale-while-revalidate=</em>
	<p><em>ignore-stale-while-revalidate=</em>
	<p><em>max-stale=</em>
	<p><em>negative-ttl=</em>

	<tag>refresh_stale_hit</tag>

	<tag>server_http11</tag>

	<tag>storeurl_access</tag>

	<tag>storeurl_rewrite_children</tag>

	<tag>storeurl_rewrite_concurrency</tag>

	<tag>storeurl_rewrite_program</tag>
	
	<tag>update_headers</tag>

	<tag>upgrade_http0.9</tag>

	<tag>zero_buffers</tag>

</descrip>

<sect1>Missing ./configure options available in Squid-2.7
<p>
<descrip>
	<tag>--without-system-md5</tag>

</descrip>

</article>
